<template><div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="line"><span class="token comment">/* eslint-disable no-restricted-syntax */</span></span>
<span class="line"><span class="token comment">/* eslint-disable guard-for-in */</span></span>
<span class="line"><span class="token comment">/* eslint-disable no-alert */</span></span>
<span class="line"><span class="token comment">/* eslint-disable no-undef */</span></span>
<span class="line"></span>
<span class="line">declare <span class="token keyword">const</span> <span class="token literal-property property">window</span><span class="token operator">:</span> any</span>
<span class="line"><span class="token comment">// https://github.com/wendux/DSBridge-Android/blob/master/app/src/main/assets/dsbridge.js</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token literal-property property">bridge</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// default: this, // for typescript</span></span>
<span class="line">    <span class="token function">call</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">method</span><span class="token operator">:</span> any<span class="token punctuation">,</span> args<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">,</span> cb<span class="token operator">?</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token string">''</span> <span class="token keyword">as</span> any</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> args <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            cb <span class="token operator">=</span> args</span>
<span class="line">            args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token literal-property property">arg</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> args <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> args <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> cb <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> cbName <span class="token operator">=</span> <span class="token string">'dscb'</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>dscb<span class="token operator">++</span></span>
<span class="line">            window<span class="token punctuation">[</span>cbName<span class="token punctuation">]</span> <span class="token operator">=</span> cb</span>
<span class="line">            arg<span class="token punctuation">.</span>_dscbstub <span class="token operator">=</span> cbName</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        arg <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// if in webview that dsBridge provided, call!</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>window <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>_dsbridge<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            ret <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">_dsbridge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> arg<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>window <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>_dswk<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>window <span class="token operator">&amp;&amp;</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'_dsbridge'</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            ret <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">'_dsbridge='</span> <span class="token operator">+</span> method<span class="token punctuation">,</span> arg<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>ret <span class="token operator">||</span> <span class="token string">'{}'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">register</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">fun</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">asyn</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> q <span class="token operator">=</span> asyn <span class="token operator">?</span> window<span class="token punctuation">.</span>_dsaf <span class="token operator">:</span> window<span class="token punctuation">.</span>_dsf</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>_dsInit<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            window<span class="token punctuation">.</span>_dsInit <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">            <span class="token comment">// notify native that js apis register successfully on next event loop</span></span>
<span class="line">            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">bridge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.dsinit'</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fun <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            q<span class="token punctuation">.</span>_obs<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> fun</span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            q<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> fun</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">registerAsyn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">fun</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fun<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">hasNativeMethod</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.hasNativeMethod'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> type <span class="token operator">||</span> <span class="token string">'all'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">disableJavascriptDialogBlock</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">disable</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.disableJavascriptDialogBlock'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">disable</span><span class="token operator">:</span> disable <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>_dsf<span class="token punctuation">)</span> <span class="token keyword">return</span></span>
<span class="line">    <span class="token keyword">let</span> _close <span class="token operator">=</span> window<span class="token punctuation">.</span>close</span>
<span class="line">    <span class="token keyword">let</span> <span class="token literal-property property">ob</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 保存JS同步方法</span></span>
<span class="line">        <span class="token literal-property property">_dsf</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">_obs</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// 保存JS异步方法</span></span>
<span class="line">        <span class="token literal-property property">_dsaf</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">_obs</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">dscb</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">dsBridge</span><span class="token operator">:</span> bridge<span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>bridge<span class="token punctuation">.</span><span class="token function">hasNativeMethod</span><span class="token punctuation">(</span><span class="token string">'_dsb.closePage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">bridge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.closePage'</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">_close</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">_handleMessageFromNative</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">info</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> arg <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>data<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token literal-property property">ret</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">id</span><span class="token operator">:</span> info<span class="token punctuation">.</span>callbackId<span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">complete</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsf<span class="token punctuation">[</span>info<span class="token punctuation">.</span>method<span class="token punctuation">]</span></span>
<span class="line">            <span class="token keyword">let</span> af <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsaf<span class="token punctuation">[</span>info<span class="token punctuation">.</span>method<span class="token punctuation">]</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token function-variable function">callSyn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">f</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">ob</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                ret<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ob<span class="token punctuation">,</span> arg<span class="token punctuation">)</span></span>
<span class="line">                <span class="token function">bridge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.returnValue'</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token function-variable function">callAsyn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">f</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">ob</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                arg<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">complete</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>
<span class="line">                    ret<span class="token punctuation">.</span>data <span class="token operator">=</span> data</span>
<span class="line">                    ret<span class="token punctuation">.</span>complete <span class="token operator">=</span> complete <span class="token operator">!==</span> <span class="token boolean">false</span></span>
<span class="line">                    <span class="token function">bridge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'_dsb.returnValue'</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ob<span class="token punctuation">,</span> arg<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">callSyn</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsf<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>af<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">callAsyn</span><span class="token punctuation">(</span>af<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsaf<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// with namespace</span></span>
<span class="line">                <span class="token keyword">let</span> name <span class="token operator">=</span> info<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span></span>
<span class="line">                <span class="token keyword">let</span> method <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">let</span> namespace <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">let</span> obs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsf<span class="token punctuation">.</span>_obs</span>
<span class="line">                <span class="token keyword">let</span> ob <span class="token operator">=</span> obs<span class="token punctuation">[</span>namespace<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">                <span class="token keyword">let</span> m <span class="token operator">=</span> ob<span class="token punctuation">[</span>method<span class="token punctuation">]</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> m <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token function">callSyn</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> ob<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token keyword">return</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                obs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_dsaf<span class="token punctuation">.</span>_obs</span>
<span class="line">                ob <span class="token operator">=</span> obs<span class="token punctuation">[</span>namespace<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">                m <span class="token operator">=</span> ob<span class="token punctuation">[</span>method<span class="token punctuation">]</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> m <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token function">callAsyn</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> ob<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> attr <span class="token keyword">in</span> ob<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        window<span class="token punctuation">[</span>attr<span class="token punctuation">]</span> <span class="token operator">=</span> ob<span class="token punctuation">[</span>attr<span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    bridge<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'_hasJavascriptMethod'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">method</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> name <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>_dsf<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>_dsaf<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// with namespace</span></span>
<span class="line">        method <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> namespace <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> ob <span class="token operator">=</span> window<span class="token punctuation">.</span>_dsf<span class="token punctuation">.</span>_obs<span class="token punctuation">[</span>namespace<span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>_dsaf<span class="token punctuation">.</span>_obs<span class="token punctuation">[</span>namespace<span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">return</span> ob <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>ob<span class="token punctuation">[</span>method<span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> bridge</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


